get_filename_component(PROJ_NAME ${CMAKE_CURRENT_SOURCE_DIR} NAME)
project(${PROJ_NAME})

file(GLOB SOURCES "*.cpp" )
file(GLOB HEADERS "*.h" )

list(APPEND HEADERS "addons/CLI11.hpp")

find_path(AVCODEC_INCLUDE_DIR libavcodec/avcodec.h)
find_library(AVCODEC_LIBRARY avcodec)

add_library(${PROJ_NAME} ${SOURCES} ${HEADERS})

target_include_directories(${PROJ_NAME} PUBLIC "${CMAKE_CURRENT_SOURCE_DIR}/..")
target_include_directories(${PROJ_NAME} PRIVATE ${AVCODEC_INCLUDE_DIR})
target_link_libraries(${PROJ_NAME} PRIVATE ${AVCODEC_LIBRARY})
